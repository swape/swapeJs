"use strict";var sjs=function(){function e(e){return e&&"undefined"!=typeof e&&(e.setStyle=function(t,n){if("undefined"!=typeof e.length)for(var r=0;e.length>r;r++)e[r].style[t]=n;else e.style[t]=n;return e}),e}var t={get:function(t,n){var r=t.trim().split(" ").length,o=t.charAt(0),i=null;return i="#"===o&&1===r?document.getElementById(t.replace("#","")):n?document.querySelectorAll(t):document.querySelector(t),i=e(i)},getAll:function(e){return t.get(e,!0)}},n={xhr:function(e,t,n,r){return new Promise(function(o,i){var u=new XMLHttpRequest;if(e=e.toUpperCase(),"POST"!==e){var l=[],f=void 0;if("undefined"!=typeof n&&null!==n){t=t.match(/\?/gim)?t+"&":t+"?";for(f in n)l.push(encodeURIComponent(f)+"="+encodeURIComponent(n[f]));t+=l.join("&")}}if(u.open(e,t),r&&"undefined"!=typeof r){var a="";for(a in r)u.setRequestHeader(a,r[a])}u.onload=function(){200===u.status?o(u.response):i(Error(u.statusText))},u.onerror=function(){i(Error("Network Error"))},"POST"===e?"undefined"!=typeof n&&null!==n&&u.send(JSON.stringify(n)):u.send()})},get:function(e,t,r){return n.xhr("GET",e,t,r)},post:function(e,t,r){return n.xhr("POST",e,t,r)}},r={_routes:[],_currentRoute:"",_defaultView:"",_config:{},_altView:"",add:function(e){return r._routes.push(e),r},init:function(e){return r._bindLinks(t.get("a[sjs-link]",!0)),r._config=e,r._getPath(),r._findRouteMatch(),r},_bindLink:function(e){e.preventDefault();var t=e.target.innerText.trim().replace(/ /gi,"_");window.history.pushState(null,t,e.target.href),r._getPath(),r._altView=e.target.getAttribute("sjs-link"),r._findRouteMatch()},_bindLinks:function(e){if(e&&e.length>0)for(var t=0;e.length>t;t++)e[t].addEventListener("click",r._bindLink)},_getPath:function(){r._currentRoute=location.pathname},_runController:function(e){r._changeView(e),"undefined"!=typeof e.controller&&e.controller()},_findRouteMatch:function(){for(var e=0;r._routes.length>e;e++){var t=r._routes[e];if(t.path&&t.path===r._currentRoute){r._doTheRoute(t);break}}},_changeView:function(e){var n=""===r._defaultView?t.get("sjs-view"):r._defaultView;r._defaultView=n,r._altView&&""!==r._altView&&(n=t.get("#"+r._altView)),""!==n&&(e.view&&""!==e.view?(n=t.get("#"+e.view),n&&(n.innerHTML=e.template)):n.innerHTML=e.template)},_doTheRoute:function(e){e.templateUrl&&("undefined"==typeof e.template||e.template&&""===e.template)?n.get(e.templateUrl).then(function(t){e.template=t,r._runController(e)}):r._runController(e)}};return{elm:t,xhr:n,router:r}}();