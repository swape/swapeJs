"use strict";var sjs=function(){function e(e){return e&&"undefined"!=typeof e&&(e.setStyle=function(t,n){if("undefined"!=typeof e.length)for(var o=0;e.length>o;o++)e[o].style[t]=n;else e.style[t]=n;return e}),e}var t={get:function(t,n){var o=t.trim().split(" ").length,r=t.charAt(0),i=null;return i="#"===r&&1===o?document.getElementById(t.replace("#","")):n?document.querySelectorAll(t):document.querySelector(t),i=e(i)},getAll:function(e){return t.get(e,!0)}},n={xhr:function(e,t,n,o){return new Promise(function(r,i){var u=new XMLHttpRequest;if(e=e.toUpperCase(),"POST"!==e){var a=[],f=void 0;if("undefined"!=typeof n&&null!==n){t=t.match(/\?/gim)?t+"&":t+"?";for(f in n)a.push(encodeURIComponent(f)+"="+encodeURIComponent(n[f]));t+=a.join("&")}}if(u.open(e,t),o&&"undefined"!=typeof o){var l="";for(l in o)u.setRequestHeader(l,o[l])}u.onload=function(){200===u.status?r(u.response):i(Error(u.statusText))},u.onerror=function(){i(Error("Network Error"))},"POST"===e?"undefined"!=typeof n&&null!==n&&u.send(JSON.stringify(n)):u.send()})},get:function(e,t,o){return n.xhr("GET",e,t,o)},post:function(e,t,o){return n.xhr("POST",e,t,o)}},o={_routes:[],_currentRoute:"",_defaultView:"",_config:{},_altView:"",add:function(e){return o._routes.push(e),o},init:function(e){return o._bindLinks(t.get("a[sjs-link]",!0)),o._config=e,o._getPath(),o._findRouteMatch(),o},_bindLink:function(e){if(e.preventDefault(),o._currentRoute!==e.target.pathname){var t=e.target.innerText.trim().replace(/ /gi,"_");o._config&&"undefined"!=typeof o._config.mode&&"history"===o._config.mode?window.history.pushState(null,t,e.target.pathname):location.hash=e.target.pathname,o._getPath(),o._altView=e.target.getAttribute("sjs-link"),o._findRouteMatch()}},_bindLinks:function(e){if(e&&e.length>0)for(var t=0;e.length>t;t++)e[t].addEventListener("click",o._bindLink)},_getPath:function(){o._config&&"undefined"!=typeof o._config.mode&&"history"===o._config.mode?o._currentRoute=location.pathname:o._currentRoute=location.hash.replace("#","").trim(),""===o._currentRoute&&(o._currentRoute="/")},_runController:function(e){o._changeView(e),"undefined"!=typeof e.controller&&e.controller()},_findRouteMatch:function(){for(var e=o._currentRoute.split("/").filter(function(e){return""!==e}),t=0;o._routes.length>t;t++){for(var n=o._routes[t],r=n.path.split("/").filter(function(e){return""!==e}),i=0,u=0;r.length>u;u++)"undefined"!=typeof r[u]&&"undefined"!=typeof e[u]&&r[u]===e[u]&&i++,"undefined"!=typeof r[u]&&"*"===r[u]&&i++;if(0!==i&&i===e.length&&e[0]===r[0]){o._doTheRoute(n);break}if(n.path&&n.path===o._currentRoute){o._doTheRoute(n);break}}},goto:function(e){e&&""!==e&&o._changeRoute(e)},_changeRoute:function(e){for(var t=0;o._routes.length>t;t++){var n=o._routes[t];if(n.path&&n.path!==o._currentRoute&&n.name&&n.name===e){o._doTheRoute(n),o._currentRoute=e;break}}},_changeView:function(e){var n=""===o._defaultView?t.get("sjs-view"):o._defaultView;o._defaultView=n,o._altView&&""!==o._altView&&(n=t.get("#"+o._altView)),""!==n&&(e.view&&""!==e.view?(n=t.get("#"+e.view),n&&(n.innerHTML=e.template)):n.innerHTML=e.template)},_doTheRoute:function(e){e.templateUrl&&("undefined"==typeof e.template||e.template&&""===e.template)?n.get(e.templateUrl).then(function(t){e.template=t,o._runController(e)}):o._runController(e)}};return{elm:t,xhr:n,router:o}}();