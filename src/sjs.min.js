var sjs=function(){"use strict";function o(e,t){var r=e.split(" ").length,n=e.charAt(0);return"#"===n&&1===r?document.getElementById(e.replace("#","")):t?document.querySelectorAll(e):document.querySelector(e)}function a(e,t){var r=o(e);return r?t&&"undefined"!=typeof r[t]?r[t]:r:void 0}function s(e,t){var r=o(e,!0);if(r){if(t){var n=[];if(r.length>0){for(var f=0;f<r.length;f++)r[f]&&t&&r[f]&&"undefined"!=typeof r[f][t]&&""!==r[f][t].trim()&&n.push(r[f][t]);return n.length>0?n:!1}return!1}return r}}function c(){var r=0;if(e&&e.length>0){for(r=0;e.length>r;r++)e[r].route===t&&(v(e[r]),f=!0),e[r]["default"]&&(i=e[r]);f===!1&&i&&v(i)}}function v(e){e.template?(S.innerHTML=e.template,d(e)):e.templateUrl&&(l[e.templateUrl]?(S.innerHTML=l[e.templateUrl],d(e)):y("get",e.templateUrl).then(function(t){S.innerHTML=t,d(e),l[e.templateUrl]=t}))}function d(e){if(e.controller){var t=s("view [sjs-route]");m(t),e.controller()}}function p(e){r=e||location.hash,""!==r&&(r=r.replace(n,"").replace("#",""),r=r.split("/"),r.length>0&&(t=r[0]))}function g(e){p(e),location.hash=e}function h(e){e.target.attributes["sjs-route"]&&e.target.attributes["sjs-route"].value&&(e.preventDefault(),t=e.target.attributes["sjs-route"].value,g(t),c())}function m(e){for(u=0;e.length>u;u++)e[u].addEventListener("click",h)}function y(e,t,r,n){return new Promise(function(f,i){var l=new XMLHttpRequest;if(e=e.toUpperCase(),"POST"!==e){var o,u=[];if("undefined"!=typeof r&&null!==r){t=t.match(/\?/gim)?t+"&":t+"?";for(o in r)u.push(encodeURIComponent(o)+"="+encodeURIComponent(r[o]));t+=u.join("&")}}if(l.open(e,t),"undefined"!=typeof n){var a="";for(a in n)l.setRequestHeader(a,n[a])}l.onload=function(){200===l.status?f(l.response):i(Error(l.statusText))},l.onerror=function(){i(Error("Network Error"))},"POST"===e?"undefined"!=typeof r&&null!==r&&l.send(JSON.stringify(r)):l.send()})}function U(e){g(e),c()}var e=[],t="",r="",n="#/",f=!1,i=!1,l={},u=0;p();var j=s("[sjs-route]");m(j);var S=a("view");return{init:function(){c()},route:function(t){e=t},gotoState:U,getState:function(){return t},getHash:function(){return r},get:a,getAll:s,set:function(e,t,r){var n=o(e,!0);if(!n||"undefined"==typeof n)return!1;if(t){if(n&&n.length>0)for(var f=0;f<n.length;f++)n[f]&&("class"===t?n[f].className=r:n[f][t]=r);else"class"===t?n.className=r:n.attr=r;return n}},add:function(e,t,r){if(!t||!r)return!1;var n=o(e,!0);if(n&&"undefined"!=typeof n&&n.length>0){for(var f=0;f<n.length;f++)n[f]&&(n[f][t]?n[f][t]=n[f][t]+" "+r:n[f][t]=r);return n}},remove:function(e,t,r){if(!t)return!1;var n=o(e,!0);if(n&&"undefined"!=typeof n&&n.length>0){for(var f=0;f<n.length;f++)n[f]&&n[f][t]&&(r?n[f][t]=n[f][t].replace(r,"").trim():(n[f][t]=null,n[f].removeAttribute(t)));return n}},xhr:y}}();